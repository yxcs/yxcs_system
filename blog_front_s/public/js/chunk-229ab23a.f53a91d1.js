(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-229ab23a"],{"04e4":function(e,t,s){"use strict";var r=s("bf9c"),a=s.n(r);a.a},a55b:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login__wrap"},[s("div",{staticClass:"tabs"},[e.isLoginForm?s("el-form",{attrs:{"label-position":"right","label-width":"0px",model:e.loginForm}},[s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{size:"small",placeholder:"用户名"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{size:"small",placeholder:"密码","show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitLoginForm()}}},[e._v("登录")])],1),s("el-form-item",{attrs:{label:""}},[s("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",type:"text"},on:{click:function(t){return e.changeForm()}}},[e._v("还没账号? 前往注册")])],1)],1):s("el-form",{attrs:{"label-position":"right","label-width":"0px",model:e.registerFrom}},[s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{size:"small",placeholder:"用户名"},model:{value:e.registerFrom.userName,callback:function(t){e.$set(e.registerFrom,"userName",t)},expression:"registerFrom.userName"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{size:"small",placeholder:"密码","show-password":""},model:{value:e.registerFrom.password,callback:function(t){e.$set(e.registerFrom,"password",t)},expression:"registerFrom.password"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-input",{attrs:{size:"small",placeholder:"确认密码","show-password":""},model:{value:e.registerFrom.rePassword,callback:function(t){e.$set(e.registerFrom,"rePassword",t)},expression:"registerFrom.rePassword"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitRegisterForm()}}},[e._v("注册")])],1),s("el-form-item",{attrs:{label:""}},[s("el-button",{staticStyle:{width:"100%"},attrs:{size:"small",type:"text"},on:{click:function(t){return e.changeForm()}}},[e._v("已有账号? 前往登录")])],1)],1)],1)])},a=[],o=s("e20c"),i=(s("34a3"),s("b667"),s("7249"),s("23b1")),l=s.n(i),n=(s("d83c"),s("2686")),m=s.n(n),u=(s("749b"),s("fea4")),c=s.n(u),d=(s("7d73"),s("e056")),g=s.n(d),p=(s("a229"),s("92e1")),h=s.n(p),w=s("591a"),b={name:"Login",data:function(){return{isLoginForm:!0,loginForm:{userName:"",password:""},registerFrom:{userName:"",password:"",rePassword:""}}},components:{"el-form":h.a,"el-form-item":g.a,"el-input":c.a,"el-upload":m.a,"el-button":l.a},mounted:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("userId");e&&t&&this.$router.replace("/user")},methods:Object(o["a"])({},Object(w["c"])("global",["setUser"]),{changeForm:function(){this.isLoginForm=!this.isLoginForm,this.loginForm={userName:"",password:""},this.registerFrom={userName:"",password:"",rePassword:""}},submitLoginForm:function(){var e=this,t={username:this.loginForm.userName,password:this.loginForm.password};return t.username?t.password?void this.$http.login.login(t).then(function(t){t.status&&t.data.data&&t.data.data.id?(e.$message.success(t.data.message),localStorage.setItem("token",t.data.token),e.saveUserMsg(t.data.data.id)):e.$message.error("登录失败请重试")}):(this.$message.warning("请输入密码"),!1):(this.$message.warning("请输入用户名"),!1)},submitRegisterForm:function(){var e=this,t={username:this.registerFrom.userName,password:this.registerFrom.password};return t.username?t.username.length<4?(this.$message.warning("用户名至少4个字符"),!1):t.password?t.password.length<4?(this.$message.warning("密码至少4个字符"),!1):t.password!==this.registerFrom.rePassword?(this.$message.warning("两次输入的密码不一致"),!1):void this.$http.login.register(t).then(function(t){t.status&&t.data.data&&t.data.data.id?(e.$message.success(t.data.message),e.changeForm()):e.$message.error("注册失败请重试")}):(this.$message.warning("请输入密码"),!1):(this.$message.warning("请输入用户名"),!1)},saveUserMsg:function(e){var t=this;this.$http.login.getUserById({id:e}).then(function(e){if(200===e.status&&200===e.data.status){var s=e.data.data;localStorage.setItem("userId",s.id),t.setUser(s),t.$nextTick(function(){var e=t.$route.query.redirect?t.$route.query.redirect:"/home";t.$router.replace(e)})}})}})},f=b,F=(s("04e4"),s("17cc")),$=Object(F["a"])(f,r,a,!1,null,"70b7b174",null);t["default"]=$.exports},bf9c:function(e,t,s){}}]);